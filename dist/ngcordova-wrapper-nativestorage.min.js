angular.module("ngCordova.plugins.nativeStorage",[]).factory("$cordovaNativeStorage",["$window","$q","$log",function(e,t,r){var n=!1,o=!1;function c(){return o||((n=e.cordova&&"browser"===e.cordova.platformId||!(e.phonegap||e.cordova))?r.log("NativeStorageWrapper: isInBrowser"):r.log("NativeStorageWrapper: isNotInBrowser"),o=!0),n}return{remove:function(r){var n=t.defer();return c()?function(t,r,n){try{e.localStorage.removeItem(t),r(null)}catch(e){n(e)}}(r,function(e){n.resolve(e)},function(e){n.reject(e)}):document.addEventListener("deviceready",function(){NativeStorage.remove(r,function(e){n.resolve(e)},function(e){n.reject(e)})}),n.promise},setItem:function(r,n){var o=t.defer();return c()?function(t,r,n,o){try{var c=JSON.stringify(r);e.localStorage[t]=c,n(r)}catch(e){o(e)}}(r,n,function(e){o.resolve(e)},function(e){o.reject(e)}):document.addEventListener("deviceready",function(){NativeStorage.setItem(r,n,function(e){o.resolve(e)},function(e){o.reject(e)})}),o.promise},getItem:function(r){var n=t.defer();return c()?function(t,r,n){try{var o=e.localStorage[t];if(null==o){var c=new Error(t+": undefined");throw c.code=2,c}r(JSON.parse(o))}catch(c){n(c)}}(r,function(e){n.resolve(e)},function(e){n.reject(e)}):document.addEventListener("deviceready",function(){NativeStorage.getItem(r,function(e){n.resolve(e)},function(e){n.reject(e)})}),n.promise},clear:function(){var r=t.defer();return c()?function(t,r){try{e.localStorage.clear(),t(null)}catch(e){r(e)}}(function(e){r.resolve(e)},function(e){r.reject(e)}):document.addEventListener("deviceready",function(){NativeStorage.clear(function(e){r.resolve(e)},function(e){r.reject(e)})}),r.promise},keys:function(){var r=t.defer();return c()?function(t,r){try{t(Object.keys(e.localStorage)||[])}catch(e){r(e)}}(function(e){r.resolve(e)},function(e){r.reject(e)}):document.addEventListener("deviceready",function(){NativeStorage.keys(function(e){r.resolve(e)},function(e){r.reject(e)})}),r.promise}}}]);
